<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<body>
    <p id="display">Display POI</p>
    <table id="POITable" class='table table-striped' border='1'>
        <thead class='thead-dark'>
            <tr>
                <th>Name</th>
                <th>Photos</th>
                <th>Rating</th>
                <th>Description</th>
                <th>Address</th>
            </tr>
        </thead>
    </table>
    <script>
    
    // Fetch a service
    // $() jQuery syntax, this means that the document has to be loaded before this gets executed
    $(async () => {
        var serviceURL = "http://localhost:5000/placesapi";

        try {
            const response =
                await fetch(
                    serviceURL, { method: 'GET' }
                );
            
            if (!response.ok) {
                // print some error
                $("#display").text("Error in retrieving Places of Interest data");
            } else {
                // success
                const fullpage = await response.json();
                const POI = fullpage.results
                var rows = "";
                    
                for (i=0; i < POI.length; i++) {
                    eachRow =
                        "<td>" + POI.name + "</td>" +
                        "<td>" + POI.photos + "</td>" +
                        "<td>" + POI.rating+ "</td>" +
                        "<td>" + POI.id + "</td>";
                        <"td>" + POI.formatted_address + "</td>"
                    rows += "<tbody><tr>" + eachRow + "</tr></tbody>";
                }

                    // add all the rows to the table
                $('#POITable').append(rows);
                
            }

        } catch (error) {
            // error, print something
            $("#display").text("Error in calling the service, "+error);
        }
    });

    </script>
</body>

</html>